#!/usr/bin/env bash
set -euo pipefail

echo "[NDJC] pre-commit: running selfcheck..."
if command -v pwsh >/dev/null 2>&1; then PWSH=pwsh; else PWSH=powershell; fi

"$PWSH" -NoLogo -NoProfile -ExecutionPolicy Bypass -File ./Tools/ndjc-selfcheck.ps1 `
  -TemplatesDir "templates/core-template" `
  -ExpectedDir "anchors" `
  -FailOnMissing:$true
