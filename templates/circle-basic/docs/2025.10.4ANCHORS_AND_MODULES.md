# NDJC · circle-basic 模板：锚点与模块清单（更新版）

> 版本：v1.0　|　主题：Material3　|　范式：circle（社交流）  
> 说明：本清单用于 **contract→plan→materialize** 的锚点对照与验收。新增的 HOOK/BLOCK 均已纳入。

---

## 1) 文本锚点（Text anchors）

**核心必备**
- `NDJC:PACKAGE_NAME`
- `NDJC:APP_LABEL`
- `NDJC:HOME_TITLE`
- `NDJC:PRIMARY_BUTTON_TEXT`
- `NDJC:THEME_NAME`

**UI / 多语言**
- `NDJC:DARK_MODE`
- `NDJC:FONT_FAMILY_PRIMARY`
- `NDJC:FONT_FAMILY_SECONDARY`
- `NDJC:I18N_ENABLED`
- `NDJC:ANIM_ENABLED`
- `NDJC:ANIM_DURATION_MS`
- `NDJC:LAYOUT_DENSITY`

**数据 / 交互策略**
- `NDJC:DATA_SOURCE`
- `NDJC:SEED_ENABLED`
- `NDJC:FEED_SORT`
- `NDJC:PAGING_SIZE`
- `NDJC:OFFLINE_POLICY`
- `NDJC:PRIVACY_POLICY`
- `NDJC:DRAFT_ENABLED`

**构建 / 打包**
- `NDJC:USE_APP_BUNDLE`
- `NDJC:BUILD_META_RUNID`
- `NDJC:FEATURE_TOGGLE_MIN`
- `NDJC:DEBUG_LOG_ENABLED`

**埋点 / 诊断**
- `NDJC:RUN_ID`
- `NDJC:LOG_LEVEL`
- `NDJC:METRICS_ENABLED`
- `NDJC:CRASHLYTICS_ENABLED`

**预留**
- `NDJC:EXPERIMENT_BUCKET`

---

## 2) 块锚点（Block anchors）

**核心页面**
- `BLOCK:HOME_HEADER`
- `BLOCK:HOME_BODY`
- `BLOCK:HOME_ACTIONS`

**UI / 主题**
- `BLOCK:THEME_COLORS`
- `BLOCK:TYPOCASE_OVERRIDES`
- `BLOCK:STRINGS_EXTRA`

**路由相关**
- `BLOCK:ROUTE_HOME`
- `BLOCK:ROUTE_DETAIL`
- `BLOCK:ROUTE_POST`
- `BLOCK:NAV_TRANSITIONS`

**体验内容**
- `BLOCK:SPLASH_CONTENT`
- `BLOCK:EMPTY_STATE`
- `BLOCK:ERROR_STATE`

**工程/调试**
- `BLOCK:DEPENDENCY_SNIPPETS`
- `BLOCK:DEBUG_PANEL`
- `BLOCK:BUILD_SUMMARY`

**扩展区块**
- `BLOCK:HEADER_AD_SLOT`
- `BLOCK:FEED_ITEM_BADGES`
- `BLOCK:USER_PROFILE_CARD`
- `BLOCK:SPONSORED_CARD`

**可选页签/设置**
- `BLOCK:PROFILE_SECTION`
- `BLOCK:SETTINGS_SECTION`

---

## 3) 列表锚点（List anchors）

- `LIST:PROGUARD_EXTRA`
- `LIST:PACKAGING_RULES`
- `LIST:ROUTES`
- `LIST:POST_FIELDS`
- `LIST:COMMENT_FIELDS`
- `LIST:ABI_SPLITS`
- `LIST:PLURAL_STRINGS`
- `LIST:COMPONENT_STYLES`
- `LIST:REMOTE_FLAGS`
- `LIST:DEEPLINK_PATTERNS`

---

## 4) 条件锚点（If anchors）

- `IF:PERMISSION.CAMERA`
- `IF:PERMISSION.MEDIA`
- `IF:PERMISSION.NOTIFICATION`
- `IF:PERMISSION.LOCATION`
- `IF:PERMISSION.CONTACTS`
- `IF:PERMISSION.SCHEDULE_EXACT_ALARM`
- `IF:PERMISSION.CLIPBOARD`
- `IF:NETWORK.CLEAR_TEXT`
- `IF:FILE_PROVIDER`
- `IF:INTENT.SHARE`

---

## 5) 资源锚点（Resource anchors）

- `RES:drawable/app_icon.png`
- `RES:drawable/empty_illustration.png`
- `RES:drawable/avatar_placeholder.png`
- `RES:drawable/brand_cover.png`
- `RES:drawable/ic_stat_notify.png`
- `RES:font/primary.ttf`
- `RES:font/secondary.ttf`
- `RES:raw/theme_colors.json`
- `RES:raw/seed_data.json`

> 说明：资源锚点使用 `RES:` 前缀统一标识；materialize 阶段会按 key → 路径写入。

---

## 6) Hook 锚点（Hooks）

- `HOOK:BEFORE_BUILD`
- `HOOK:AFTER_BUILD`
- `HOOK:PRE_INJECT`
- `HOOK:POST_INJECT`
- `HOOK:PRE_COMMIT`
- `HOOK:AFTER_INSTALL`

> 说明：新加入 **PRE/POST_INJECT** 与 **AFTER_INSTALL**，分别用于模板注入前后和首次启动时机。

---

## 7) 功能模块（Feature modules）

- **Feed**：展示列表/点赞/评论计数  
- **Detail**：查看单条 Post  
- **Post**：编辑/发布 Post  
- **Comments**：基本 UI  
- **EmptyState**：空状态占位  
- **TopBar**：通用导航栏  
- **Optional**：广告位、用户卡片、赞助卡等区块

> 启用模块时会自动补齐必要的 BLOCK/LIST 锚点（例如 `LIST:ROUTES`、`BLOCK:ROUTE_*`）。

---

## 8) 路由（Routes）

- `home` → `FeedScreen`
- `detail/{id}` → `PostDetailScreen`
- `post` → `PostEditorScreen`

- Deeplink：可按需注入 `LIST:DEEPLINK_PATTERNS`  
- 转场：可按需注入 `BLOCK:NAV_TRANSITIONS`

---

## 9) 验收标准（Checklist）

- 模板中 **不应遗留** `NDJC:`/`BLOCK:`/`LIST:`/`IF:`/`HOOK:` 注释未替换的痕迹  
- 权限按需注入：对应 `IF:PERMISSION.*` 的声明才会出现  
- 主题符合 M3，且 `BLOCK:THEME_COLORS` 可选覆盖  
- `assembleRelease` 通过；多 ABI/分包由 `LIST:ABI_SPLITS`/`LIST:PACKAGING_RULES` 驱动  
- `strings.xml` 中可选择性注入 `NDJC:RUN_ID` / `NDJC:LOG_LEVEL` 便于诊断  
- 所有新增 HOOK/BLOCK 已在本清单登记，便于后续维护

---

> 维护：本文件与模板代码同步迭代；当新增锚点或模块时请在此登记，保证 **contract→plan** 与 **materialize** 一致。
